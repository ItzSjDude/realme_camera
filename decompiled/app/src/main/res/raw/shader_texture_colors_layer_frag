precision mediump float;

uniform vec4 vColorMask;
uniform vec4 vColor;
varying vec4 v_Color;
varying float v_Layer;

uniform sampler2D u_Texture;
varying vec2 v_TexCoordinate;

void main(){
    vec4 fragColor;
    if (v_Layer < 0.1) { // layer 0
	    fragColor = vec4(vec3(texture2D(u_Texture, v_TexCoordinate)), v_Color.a);
	    //fragColor.a = v_Color.a;
	} else {
	    fragColor = vec4(vec3(v_Color), 1f);
    }

    /*
        if (fragColor.a < 0.1)
            discard;
    */
    gl_FragColor = fragColor;
}